# =============================================================================
# RELIFE MONITORING PRODUCTION CONFIGURATION
# =============================================================================
# Copy this file to .env.production and fill in your production values
# 
# SECURITY NOTE: Never commit this file with real values to Git!
# Add .env.production to your .gitignore
# =============================================================================

# -----------------------------------------------------------------------------
# Basic Configuration
# -----------------------------------------------------------------------------
ENVIRONMENT=production
TZ=UTC

# -----------------------------------------------------------------------------
# Domain Configuration
# -----------------------------------------------------------------------------
# Your production domain (without protocol)
RELIFE_DOMAIN=relife.app

# Monitoring subdomains
PROMETHEUS_DOMAIN=prometheus.relife.app
GRAFANA_DOMAIN=grafana.relife.app
ALERTMANAGER_DOMAIN=alertmanager.relife.app

# -----------------------------------------------------------------------------
# Database Configuration (for Grafana)
# -----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
GRAFANA_DB_NAME=grafana
GRAFANA_DB_USER=grafana
GRAFANA_DB_PASSWORD=your_grafana_db_password_here

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# Grafana admin password (change this!)
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password_here

# Webhook authentication token (generate random 64-char string)
WEBHOOK_AUTH_TOKEN=your_webhook_auth_token_here

# -----------------------------------------------------------------------------
# Supabase Configuration
# -----------------------------------------------------------------------------
VITE_SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# -----------------------------------------------------------------------------
# Analytics Configuration
# -----------------------------------------------------------------------------
VITE_ANALYTICS_ENDPOINT=https://analytics.relife.app
ANALYTICS_API_KEY=your_analytics_api_key_here

# -----------------------------------------------------------------------------
# Email/SMTP Configuration (for alerts and Grafana)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@relife.app
SMTP_PASSWORD=your_smtp_password_here
SMTP_FROM_ADDRESS=alerts@relife.app
SMTP_FROM_NAME="Relife Monitoring Alerts"

# -----------------------------------------------------------------------------
# Slack Integration (for alert notifications)
# -----------------------------------------------------------------------------
# Create a Slack webhook: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Default Slack channels for different alert types
SLACK_CHANNEL_CRITICAL=#critical-alerts
SLACK_CHANNEL_WARNING=#monitoring-alerts
SLACK_CHANNEL_INFO=#monitoring-info

# -----------------------------------------------------------------------------
# Discord Integration (for alert notifications)
# -----------------------------------------------------------------------------
# Create a Discord webhook in your server settings
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# -----------------------------------------------------------------------------
# PagerDuty Integration (for critical alerts)
# -----------------------------------------------------------------------------
# Get these from your PagerDuty service configuration
PAGERDUTY_ROUTING_KEY_CRITICAL=your_pagerduty_critical_routing_key
PAGERDUTY_ROUTING_KEY_URGENT=your_pagerduty_urgent_routing_key

# -----------------------------------------------------------------------------
# Redis Configuration (if using Redis for caching)
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=your_redis_password_here

# -----------------------------------------------------------------------------
# SSL/TLS Configuration
# -----------------------------------------------------------------------------
# SSL certificate paths (if using custom certs)
SSL_CERT_PATH=/etc/ssl/certs/relife.app.crt
SSL_KEY_PATH=/etc/ssl/private/relife.app.key

# Let's Encrypt email for automatic certificate generation
LETSENCRYPT_EMAIL=admin@relife.app

# -----------------------------------------------------------------------------
# Monitoring Collection Settings
# -----------------------------------------------------------------------------
# Enable/disable different metric collection types
COLLECT_BUSINESS_METRICS=true
COLLECT_PERFORMANCE_METRICS=true
COLLECT_MOBILE_METRICS=true
COLLECT_SECURITY_METRICS=true

# Collection intervals (in seconds)
BUSINESS_METRICS_INTERVAL=300    # 5 minutes
PERFORMANCE_METRICS_INTERVAL=60  # 1 minute
MOBILE_METRICS_INTERVAL=300      # 5 minutes
SECURITY_METRICS_INTERVAL=120    # 2 minutes

# -----------------------------------------------------------------------------
# Data Retention Settings
# -----------------------------------------------------------------------------
# How long to keep metrics data
PROMETHEUS_RETENTION=90d
GRAFANA_DATA_RETENTION=365d
ALERTMANAGER_DATA_RETENTION=120h

# -----------------------------------------------------------------------------
# Resource Limits
# -----------------------------------------------------------------------------
# Memory limits for containers (adjust based on your server)
PROMETHEUS_MEMORY_LIMIT=2g
GRAFANA_MEMORY_LIMIT=1g
ALERTMANAGER_MEMORY_LIMIT=512m

# CPU limits (1.0 = 1 CPU core)
PROMETHEUS_CPU_LIMIT=1.0
GRAFANA_CPU_LIMIT=0.5
ALERTMANAGER_CPU_LIMIT=0.25

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
# S3 or compatible storage for backups
BACKUP_STORAGE_TYPE=s3
BACKUP_S3_BUCKET=relife-monitoring-backups
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=your_s3_access_key
BACKUP_S3_SECRET_KEY=your_s3_secret_key

# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# -----------------------------------------------------------------------------
# Security Monitoring Configuration
# -----------------------------------------------------------------------------
# API rate limiting thresholds
API_RATE_LIMIT_THRESHOLD=1000  # requests per minute
API_ABUSE_THRESHOLD=100        # failures per minute

# Authentication monitoring
AUTH_FAILURE_THRESHOLD=10      # failed attempts per minute
BRUTE_FORCE_THRESHOLD=50       # attempts from same IP

# -----------------------------------------------------------------------------
# Business Metrics Thresholds
# -----------------------------------------------------------------------------
# Daily Active Users
DAU_WARNING_THRESHOLD=1000     # Warn if DAU drops below this
DAU_CRITICAL_THRESHOLD=500     # Critical if DAU drops below this

# Revenue monitoring
DAILY_REVENUE_WARNING_THRESHOLD=100    # USD
MONTHLY_REVENUE_TARGET=10000           # USD

# Subscription metrics
CHURN_RATE_WARNING=10.0               # Percentage
CHURN_RATE_CRITICAL=15.0              # Percentage

# Alarm success rates
ALARM_SUCCESS_RATE_WARNING=80.0       # Percentage
ALARM_SUCCESS_RATE_CRITICAL=75.0      # Percentage

# -----------------------------------------------------------------------------
# Performance Thresholds
# -----------------------------------------------------------------------------
# Response time thresholds (in milliseconds)
RESPONSE_TIME_WARNING=2000
RESPONSE_TIME_CRITICAL=5000

# Error rate thresholds (percentage)
ERROR_RATE_WARNING=5.0
ERROR_RATE_CRITICAL=10.0

# Mobile app performance
MOBILE_CRASH_RATE_WARNING=1.0         # Percentage
MOBILE_CRASH_RATE_CRITICAL=2.0        # Percentage

# -----------------------------------------------------------------------------
# SLA Configuration
# -----------------------------------------------------------------------------
# Uptime targets (percentage)
UPTIME_TARGET_PUBLIC=99.9
UPTIME_TARGET_PREMIUM=99.95

# Response time SLA (milliseconds)
SLA_RESPONSE_TIME_95TH=2000
SLA_RESPONSE_TIME_99TH=5000

# Error budget (monthly percentage)
ERROR_BUDGET_TARGET=0.1                # 0.1% = 99.9% uptime

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
# 
# 1. Copy this file to .env.production
# 2. Fill in all the values marked as "your_*_here"
# 3. Generate secure passwords for database and auth tokens
# 4. Set up webhook URLs for Slack, Discord, and PagerDuty
# 5. Configure your SMTP settings for email alerts
# 6. Adjust thresholds based on your application requirements
# 7. Test all webhook endpoints before production deployment
# 
# Security checklist:
# - [ ] All passwords are strong and unique
# - [ ] Webhook URLs are configured and tested
# - [ ] SSL certificates are valid and properly configured
# - [ ] Database credentials are secure
# - [ ] API keys have minimal required permissions
# - [ ] Backup storage is properly secured
# 
# =============================================================================